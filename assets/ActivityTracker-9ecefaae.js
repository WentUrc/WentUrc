import{_ as e}from"./index-fdea595c.js";class n{constructor(t){this.manager=t,this.clickCount=0,this.scrollDistance=0,this.lastScrollPosition=0,this.isClickTrackingActive=!0,this.isScrollTrackingActive=!0,this.trackClickCount=this.trackClickCount.bind(this),this.trackScrollDistance=this.trackScrollDistance.bind(this)}initialize(){this.loadData(),this.clickCount=this.manager.storage.getNumber("click-count")||0,this.scrollDistance=this.manager.storage.getNumber("scroll-count")||0,this.isClickTrackingActive&&document.addEventListener("click",this.handleClick.bind(this)),this.isScrollTrackingActive&&(window.addEventListener("scroll",this.trackScrollDistance),this.lastScrollPosition=window.pageYOffset||document.documentElement.scrollTop)}loadData(){const t=this.manager.storage;this.manager.isAchievementUnlocked("scroll-champion")?this.isScrollTrackingActive=!1:(this.scrollDistance=t.getNumber("wenturc-scroll-distance",0),this.scrollDistance>=5e3&&(this.manager.unlockAchievement("scroll-champion"),this.isScrollTrackingActive=!1)),this.manager.isAchievementUnlocked("click-addict")?this.isClickTrackingActive=!1:(this.clickCount=t.getNumber("wenturc-click-count",0),this.clickCount>=100&&(this.manager.unlockAchievement("click-addict"),this.isClickTrackingActive=!1))}handleClick(){this.clickCount++,this.trackClickCount()}trackClickCount(){this.isClickTrackingActive&&(this.manager.storage.setNumber("click-count",this.clickCount),this.clickCount>=100&&!this.manager.isAchievementUnlocked("click-addict")&&(this.manager.storage.setNumber("wenturc-click-count",this.clickCount),setTimeout(()=>{this.manager.unlockAchievement("click-addict"),setTimeout(()=>{e(()=>import("./index-fdea595c.js").then(t=>t.A),["./index-fdea595c.js","./index-3ee269b5.css"],import.meta.url).then(t=>{t.default&&typeof t.default.checkAndUnlockImmediately=="function"&&t.default.checkAndUnlockImmediately()})},500)},0),this.isClickTrackingActive=!1,document.removeEventListener("click",this.handleClick.bind(this))))}trackScrollDistance(){if(!this.isScrollTrackingActive)return;const t=window.pageYOffset||document.documentElement.scrollTop,c=Math.abs(t-this.lastScrollPosition);this.scrollDistance+=c,this.lastScrollPosition=t,c>100&&this.manager.storage.setNumber("wenturc-scroll-distance",this.scrollDistance),this.scrollDistance>=5e3&&(this.isScrollTrackingActive=!1,this.manager.storage.setNumber("wenturc-scroll-distance",this.scrollDistance),setTimeout(()=>{this.manager.unlockAchievement("scroll-champion"),setTimeout(()=>{e(()=>import("./index-fdea595c.js").then(i=>i.A),["./index-fdea595c.js","./index-3ee269b5.css"],import.meta.url).then(i=>{i.default&&typeof i.default.checkAndUnlockImmediately=="function"&&i.default.checkAndUnlockImmediately()})},500)},0),window.removeEventListener("scroll",this.trackScrollDistance))}cleanup(){this.isClickTrackingActive&&document.removeEventListener("click",this.handleClick.bind(this)),this.isScrollTrackingActive&&window.removeEventListener("scroll",this.trackScrollDistance)}}export{n as default};
